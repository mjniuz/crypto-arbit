<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./bootstrap.min.css" crossorigin="anonymous">

    <base data-usdt="0"/>
    <title>MJ Crypto Trading Arbit Indodax, Bittrex, HitBTC</title>
    <style>
        .buy{
            background-color: #b2fff152;
        }
        .sell{
            background-color: #f4faca;
        }

        .opportunity-out{
            background-color: #11a210;
            color:white;
        }
        .opportunity-in{
            background-color: red;
            color:white;
        }
        .opportunity-in .opportunity-out{
            background-color: #000000;
            color:white;
        }

        tr.zoom-hover:hover {
            //transform: scale(1.1); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
        }
    </style>
</head>
<body>
<header>
    <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
            <div class="row">
                <div class="col-sm-8 col-md-7 py-4">
                    <h4 class="text-white">About</h4>
                    <p class="text-muted">Add some information about the album below, the author, or any other background context. Make it a few sentences long so folks can pick up some informative tidbits. Then, link them off to some social networking sites or contact information.</p>
                </div>
                <div class="col-sm-4 offset-md-1 py-4">
                    <h4 class="text-white">Contact</h4>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Follow on Twitter</a></li>
                        <li><a href="#" class="text-white">Like on Facebook</a></li>
                        <li><a href="#" class="text-white">Email me</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="navbar navbar-dark bg-dark box-shadow">
        <div class="container d-flex justify-content-between">
            <a href="#" class="navbar-brand d-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                <strong>MJ Arbit</strong>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </div>
</header>

<main role="main">

    <section class="jumbotron text-center">
        <div class="container">
            <p>
                <span class="opportunity-out">Opportunity Indodax to Other</span>
                <span class="opportunity-in">Opportunity Other to Indodax</span>
            </p>
            <table class="table table-sm table-striped table-bordered">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Type</th>
                    <th scope="col">Indodax <span class="badge" id="indodax-status">PEND</span></th>
                    <th scope="col">HitBTC <span class="badge" id="hitbtc-status">PEND</span></th>
                    <th scope="col">Bittrex <span class="badge" id="bittrex-status">PEND</span></th>
                </tr>
                </thead>
                <tbody id="result">
                </tbody>
            </table>
        </div>
    </section>


</main>

<footer class="text-muted">
    <div class="container">
        <p class="float-right">
            <a href="#">Back to top</a>
        </p>
        <p>Project by Muhamad Yulianto</p>
        <p>Support? <a href="https://facebook.com/mjniuz">Visit My Facebook</a>.</p>
    </div>
</footer>



<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="./jquery-3.3.1.min.js"></script>
<script src="./popper.min.js"></script>
<script src="./bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        /*$.get("https://indodax.com/api/pairs", function (data, status) {
            console.log(data);
        });
        $.get("https://api.hitbtc.com/api/2/public/symbol", function (data, status) {
            console.log(data);
        });*/
        let allRequest = [
            {
                "id": "usdt-idr",
                "title": "USDT",
                "request_indodax": {
                    "sub": "usdtidr.kline.1m",
                    "id": "1",
                    "pair_id": "usdt_idr"
                }
            },
            {
                "id": "btc-idr",
                "title": "BTC",
                "request_indodax": {
                    "sub": "btcidr.kline.1m",
                    "id": "2",
                    "pair_id": "btc_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "BTCUSD"
                    },
                    "id": 2
                },
                "bittrex_pair": "USDT-BTC"
            },
            {
                "id": "str-idr",
                "title": "XLM",
                "request_indodax": {
                    "sub": "xlmidr.kline.1m",
                    "id": "3",
                    "pair_id": "xlm_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "XLMUSD"
                    },
                    "id": 3
                },
                "bittrex_pair": "USDT-XLM"
            },
            {
                "id": "xrp-idr",
                "title": "XRP",
                "request_indodax": {
                    "sub": "xrpidr.kline.1m",
                    "id": "4",
                    "pair_id": "xrp_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "XRPUSDT"
                    },
                    "id": 4
                },
                "bittrex_pair": "USDT-XRP"
            },
            {
                "id": "ada-idr",
                "title": "ADA",
                "request_indodax": {
                    "sub": "adaidr.kline.1m",
                    "id": "5",
                    "pair_id": "ada_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "ADAUSD"
                    },
                    "id": 5
                },
                "bittrex_pair": "USDT-ADA"
            },
            {
                "id": "doge-idr",
                "title": "DOGE",
                "request_indodax": {
                    "sub": "dogeidr.kline.1m",
                    "id": "6",
                    "pair_id": "doge_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "DOGEUSD"
                    },
                    "id": 6
                },
                "bittrex_pair": "USDT-DOGE"
            },
            {
                "id": "link-idr",
                "title": "LINK",
                "request_indodax": {
                    "sub": "linkidr.kline.1m",
                    "id": "7",
                    "pair_id": "link_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "LINKUSD"
                    },
                    "id": 7
                },
                "bittrex_pair": "USDT-LINK"
            },
            {
                "id": "matic-idr",
                "title": "MATIC",
                "request_indodax": {
                    "sub": "maticidr.kline.1m",
                    "id": "8",
                    "pair_id": "matic_idr"
                },
                "bittrex_pair": "USDT-MATIC"
            },
            {
                "id": "uni-idr",
                "title": "UNI",
                "request_indodax": {
                    "sub": "uniidr.kline.1m",
                    "id": "9",
                    "pair_id": "uni_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "UNIUSD"
                    },
                    "id": 9
                },
                "bittrex_pair": "USDT-UNI"
            },
            {
                "id": "trx-idr",
                "title": "TRX",
                "request_indodax": {
                    "sub": "trxidr.kline.1m",
                    "id": "10",
                    "pair_id": "trx_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "TRXUSD"
                    },
                    "id": 10
                },
                "bittrex_pair": "USDT-TRX"
            },
            {
                "id": "xmr-idr",
                "title": "XMR",
                "request_indodax": {
                    "sub": "xmridr.kline.1m",
                    "id": "11",
                    "pair_id": "xmr_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "XMRUSD"
                    },
                    "id": 11
                },
                "bittrex_pair": "USDT-XMR"
            },
            {
                "id": "btt-idr",
                "title": "BTT",
                "request_indodax": {
                    "sub": "bttidr.kline.1m",
                    "id": "12",
                    "pair_id": "btt_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "BTTUSD"
                    },
                    "id": 12
                },
                "bittrex_pair": "BTT-USDT"
            },
            {
                "id": "dot-idr",
                "title": "DOT",
                "request_indodax": {
                    "sub": "dotidr.kline.1m",
                    "id": "13",
                    "pair_id": "dot_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "DOTUSD"
                    },
                    "id": 13
                },
                "bittrex_pair": "USDT-DOT"
            },
            {
                "id": "iost-idr",
                "title": "IOST",
                "request_indodax": {
                    "sub": "iostidr.kline.1m",
                    "id": "14",
                    "pair_id": "iost_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "IOSTUSD"
                    },
                    "id": 14
                },
                "bittrex_pair": "USDT-IOST"
            },
            {
                "id": "hedg-idr",
                "title": "HEDG",
                "request_indodax": {
                    "sub": "hedgidr.kline.1m",
                    "id": "15",
                    "pair_id": "hedg_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "HEDGUSD"
                    },
                    "id": 15
                },
                "bittrex_pair": "USDT-HEDG"
            },
            {
                "id": "mbl-idr",
                "title": "MBL",
                "request_indodax": {
                    "sub": "mblidr.kline.1m",
                    "id": "16",
                    "pair_id": "mbl_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "MBLUSD"
                    },
                    "id": 16
                },
                "bittrex_pair": "USDT-MBL"
            },
            {
                "id": "waves-idr",
                "title": "WAVES",
                "request_indodax": {
                    "sub": "wavesidr.kline.1m",
                    "id": "17",
                    "pair_id": "waves_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "WAVESUSD"
                    },
                    "id": 17
                },
                "bittrex_pair": "USDT-WAVES"
            },
            {
                "id": "eos-idr",
                "title": "EOS",
                "request_indodax": {
                    "sub": "eosidr.kline.1m",
                    "id": "18",
                    "pair_id": "eos_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "EOSUSD"
                    },
                    "id": 18
                },
                "bittrex_pair": "USDT-EOS"
            },
            {
                "id": "iota-idr",
                "title": "IOTA",
                "request_indodax": {
                    "sub": "iotaidr.kline.1m",
                    "id": "19",
                    "pair_id": "iota_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "IOTAUSD"
                    },
                    "id": 19
                },
                "bittrex_pair": "USDT-IOTA"
            },
            {
                "id": "comp-idr",
                "title": "COMP",
                "request_indodax": {
                    "sub": "compidr.kline.1m",
                    "id": "20",
                    "pair_id": "iota_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "COMPUSD"
                    },
                    "id": 20
                },
                "bittrex_pair": "USDT-COMP"
            },
            {
                "id": "jst-idr",
                "title": "JST",
                "request_indodax": {
                    "sub": "jstidr.kline.1m",
                    "id": "21",
                    "pair_id": "jst_idr"
                },
                "request_hitbtc": {
                    "method": "subscribeTicker",
                    "params": {
                        "symbol": "JSTUSD"
                    },
                    "id": 21
                },
                "bittrex_pair": "USDT-JST"
            }
        ];

        $(allRequest).each(function (k, v) {
            let htmlTable = '';

            htmlTable += '<tr class="zoom-hover">\n' +
                '                   <th rowspan="2" class="head-' + v.id + '" data-id="' + v.id + '">' + v.title + ' <span class="badge badge-primary" id="percent-'+ v.id +'"></span></th>' +
                '                   <td class="buy">' +
                '                        Buy' +
                '                   </td>' +
                '                   <td class="buy">' +
                '                       <span class="' + v.id + '" id="indodax-buy-' + v.id + '" data-num="" data-market="indodax" data-type="buy"></span>' +
                '                   </td>' +
                '                   <td class="buy">' +
                '                       <span class="' + v.id + '"  id="hitbtc-buy-' + v.id + '" data-num="" data-market="hitbtc" data-type="buy"></span>' +
                '                   </td>' +
                '                   <td class="buy">' +
                '                       <span class="' + v.id + '"  id="bittrex-buy-' + v.id + '" data-num="" data-market="bittrex" data-type="buy"></span>' +
                '                   </td>' +
                '                </tr>';

            htmlTable += '<tr class="zoom-hover">\n' +
                '                   <td class="sell">Sell</td>' +
                '                   <td class="sell">' +
                '                       <span class="' + v.id + '" id="indodax-sell-' + v.id + '" data-num="" data-market="indodax" data-type="sell"></span>' +
                '                   </td>' +
                '                   <td class="sell">' +
                '                       <span class="' + v.id + '" id="hitbtc-sell-' + v.id + '" data-num="" data-market="hitbtc" data-type="sell"></span>' +
                '                   </td>' +
                '                   <td class="sell">' +
                '                       <span class="' + v.id + '" id="bittrex-sell-' + v.id + '" data-num="" data-market="bittrex" data-type="sell"></span>' +
                '                   </td>' +
                '                </tr>';

            $(htmlTable).appendTo("#result");
        });

        /**
         * HitBTC Socket
         * @type {WebSocket}
         */
        var socketHitBtc = new WebSocket("wss://api.hitbtc.com/api/2/ws");
        socketHitBtc.onopen = function () {
            switchOnOff('hitbtc-status', true, "ON");

            socketHitBtc.onclose = function () {
                switchOnOff('hitbtc-status', false, "OFF");
            }

            socketHitBtc.onerror = function () {
                switchOnOff('hitbtc-status', false, "ERROR");
            }

            $(allRequest).each(function (k, v) {
                let req = v.request_hitbtc;
                if (typeof req == 'undefined') {
                    return;
                }
                //console.log(req);

                try {
                    socketHitBtc.send(JSON.stringify(req));
                } catch (exception) {
                    console.log(exception);
                }
            });
        }

        socketHitBtc.onmessage = function (msg) {
            if (typeof msg.data != 'undefined') {
                // continue

                if (typeof msg.data == 'undefined') {
                    return;
                }
                let data = JSON.parse(msg.data).params;
                $(allRequest).each(function (k, v) {

                    //console.log(data);
                    if (typeof data != 'undefined' && typeof data.symbol != 'undefined' && typeof v.request_hitbtc != 'undefined' && data.symbol == v.request_hitbtc.params.symbol) {
                        let sell = formatMoney(parseFloat(data.ask) * parseFloat($('base').data('usdt')), 2, ',', '.');
                        let buy = formatMoney(parseFloat(data.bid) * parseFloat($('base').data('usdt')), 2, ',', '.');

                        //console.log('indodax-sell-' + v.id);
                        let indodaxSell = parseFloat($('#indodax-sell-' + v.id).data('num'));
                        let indodaxBuy  = parseFloat($('#indodax-buy-' + v.id).data('num'));
                        if(indodaxSell > 0 && indodaxBuy > 0){
                            let indodaxIsdt =  parseFloat($('base').data('usdt'));

                            let percentMarginOut      =  (indodaxSell - (parseFloat(data.ask) * indodaxIsdt)) / indodaxSell * 100;
                            let percentMarginIn      =  ((parseFloat(data.bid) * indodaxIsdt) - indodaxBuy) / indodaxBuy * 100;

                            $('#percent-' + v.id).text(formatMoney((percentMarginIn > percentMarginOut ? percentMarginIn : percentMarginOut), 2, ',', '.') + '%');
                        }

                        $("#hitbtc-buy-" + v.id).text(buy);
                        $("#hitbtc-sell-" + v.id).text(sell);

                        $("#hitbtc-buy-" + v.id).data('num', parseFloat(data.bid));
                        $("#hitbtc-sell-" + v.id).data('num', parseFloat(data.ask));
                        opportunity(v.id);

                    }
                })
                //console.log(dataIndodax);
            }

            //console.log(msg.data);
        }


        /**
         * Indodax Socket
         * @type {WebSocket}
         */
        var socketIndodax = new WebSocket("wss://kline.indodax.com/ws/");
        socketIndodax.onopen = function () {
            switchOnOff('indodax-status', true, "ON");

            $(allRequest).each(function (k, v) {
                let req = v.request_indodax;

                try {
                    socketIndodax.send(JSON.stringify(req));
                } catch (exception) {
                    console.log(exception);
                }
            });

            socketIndodax.onclose    = function(){
                switchOnOff('indodax-status', false, "OFF");
            }

            socketIndodax.onerror    = function(){
                switchOnOff('indodax-status', false, "ERROR");
            }
        }

        socketIndodax.onmessage = function (msg) {
            if (typeof msg.data != 'undefined') {
                // continue
                return;

                let dataIndodax = JSON.parse(msg.data);
                $(allRequest).each(function (k, v) {
                    if (typeof dataIndodax.ch != 'undefined' && dataIndodax.ch == v.request_indodax.sub) {
                        let buy = formatMoney(dataIndodax.tick.o, 2, ',', '.');
                        let sell = formatMoney(dataIndodax.tick.c, 2, ',', '.');

                        // Special USDT - IDR
                        if (dataIndodax.ch == 'usdtidr.kline.1m') {
                            $("base").data('usdt', dataIndodax.tick.c);
                        }

                        $("#indodax-buy-" + v.id).text(buy);
                        $("#indodax-sell-" + v.id).text(sell);

                        $("#indodax-buy-" + v.id).data('num', dataIndodax.tick.c);
                        $("#indodax-sell-" + v.id).data('num', dataIndodax.tick.o);
                        console.log(dataIndodax.tick.c);
                        opportunity(v.id);
                    }
                })
                //console.log(dataIndodax);
            }

            //console.log(msg.data);
        }

        apiIndodaxManual();
        setInterval(function() {
            apiIndodaxManual();
        }, 1000 * 10 * 1);

        function apiIndodaxManual(){
            // Host https://indodax.com/api/ticker_all
            $.get("https://indodax.com/api/ticker_all", function (data, status) {
                let tickers     = data.tickers;
                //console.log(tickers);
                if(typeof tickers != 'undefined'){
                    $(allRequest).each(function (k, v) {
                        if(typeof tickers[v.request_indodax.pair_id] != 'undefined'){
                            //console.log(tickers[v.request_indodax.pair_id]);
                            let theVal  = tickers[v.request_indodax.pair_id];

                            let buy = formatMoney(theVal.buy, 2, ',', '.');
                            let sell = formatMoney(theVal.sell, 2, ',', '.');

                            // Special USDT - IDR
                            if (v.id == 'usdt-idr') {
                                $("base").data('usdt', theVal.last);
                            }

                            $("#indodax-buy-" + v.id).text(buy);
                            $("#indodax-sell-" + v.id).text(sell);

                            $("#indodax-buy-" + v.id).data('num', theVal.buy);
                            $("#indodax-sell-" + v.id).data('num', theVal.sell);
                            opportunity(v.id);
                        }
                    });
                }
            });
        }
        /**
         * Bittrex Socket
         * @type {WebSocket}
         */
        var socketBittrex = new WebSocket("wss://bittrex-node-socket-7rg3r.ondigitalocean.app");
        //var socketBittrex = new WebSocket("ws://localhost:8080");
        socketBittrex.onopen = function () {
            switchOnOff('bittrex-status', true, "ON");


            socketBittrex.onclose    = function(){
                switchOnOff('bittrex-status', false, "OFF");
            }

            socketBittrex.onerror    = function(){
                switchOnOff('bittrex-status', false, "ERROR");
            }
        }

        socketBittrex.onmessage = function (msg) {
            //console.log(msg);
            if (typeof msg.data != 'undefined') {
                // continue
                let dataBittrex = JSON.parse(msg.data).data;

                //console.log({"bittrex": dataBittrex});
                $(allRequest).each(function (k, v) {
                    if (typeof dataBittrex.pair != 'undefined' && dataBittrex.pair == v.bittrex_pair) {
                        let sell = formatMoney(dataBittrex.sell * parseFloat($('base').data('usdt')), 2, ',', '.');
                        let buy = formatMoney(dataBittrex.buy * parseFloat($('base').data('usdt')), 2, ',', '.');

                        //console.log(sell);
                        $("#bittrex-buy-" + v.id).text(buy);
                        $("#bittrex-sell-" + v.id).text(sell);

                        $("#bittrex-buy-" + v.id).data('num', dataBittrex.buy);
                        $("#bittrex-sell-" + v.id).data('num', dataBittrex.sell);

                        opportunity(v.id);
                    }
                })
                //console.log(dataIndodax);
            }

            //console.log(msg.data);
        }


        function formatMoney(num, decPlaces, thouSeparator, decSeparator) {
            var n = num,
                decPlaces = isNaN(decPlaces = Math.abs(decPlaces)) ? 2 : decPlaces,
                decSeparator = decSeparator == undefined ? "." : decSeparator,
                thouSeparator = thouSeparator == undefined ? "," : thouSeparator,
                sign = n < 0 ? "-" : "",
                i = parseInt(n = Math.abs(+n || 0).toFixed(decPlaces)) + "",
                j = (j = i.length) > 3 ? j % 3 : 0;
            return sign + (j ? i.substr(0, j) + thouSeparator : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thouSeparator) + (decPlaces ? decSeparator + Math.abs(n - i).toFixed(decPlaces).slice(2) : "");
        };

        function opportunity(id) {
            /*
            Buy From Indodax and Sell to other
             */

            let sellElIndodax = $('#indodax-sell-' + id);
            let sellElBittrex = $('#bittrex-sell-' + id);
            let sellElHitBtc = $('#hitbtc-sell-' + id);


            let buyElIndodax = $('#indodax-buy-' + id);
            let buyElBittrex = $('#bittrex-buy-' + id);
            let buyElHitBtc = $('#hitbtc-buy-' + id);

            let buyIndodaxNum = 0;
            let buyBittrexNum = 0;
            let buyHitBtcNum = 0;
            if (buyElIndodax.data('market') == 'indodax' && buyElIndodax.data('type') == 'buy') {
                buyIndodaxNum = parseFloat(buyElIndodax.data('num'));
            }
            if (buyElBittrex.data('market') == 'bittrex' && buyElBittrex.data('type') == 'buy') {
                buyBittrexNum = parseFloat(buyElBittrex.data('num')) * parseFloat($('base').data('usdt'));
            }
            if (buyElHitBtc.data('market') == 'hitbtc' && buyElHitBtc.data('type') == 'buy') {
                buyHitBtcNum = parseFloat(buyElHitBtc.data('num')) * parseFloat($('base').data('usdt'));
            }


            let sellIndodaxNum = 0;
            let sellBittrexNum = 0;
            let sellHitBtcNum = 0;
            if (sellElIndodax.data('market') == 'indodax' && sellElIndodax.data('type') == 'sell') {
                sellIndodaxNum = parseFloat(sellElIndodax.data('num'));
            }
            if (sellElBittrex.data('market') == 'bittrex' && sellElBittrex.data('type') == 'sell') {
                sellBittrexNum = parseFloat(sellElBittrex.data('num')) * parseFloat($('base').data('usdt'));
            }
            if (sellElHitBtc.data('market') == 'hitbtc' && sellElHitBtc.data('type') == 'sell') {
                sellHitBtcNum = parseFloat(sellElHitBtc.data('num')) * parseFloat($('base').data('usdt'));
            }


            // Opportunity OUT
            if (!isNaN(buyIndodaxNum) && buyIndodaxNum > 0 && (!isNaN(buyBittrexNum) && buyBittrexNum > 0 || !isNaN(buyHitBtcNum) && buyHitBtcNum > 0)) {
                /*console.log({
                    "bittrex": sellBittrexNum,
                    "hitBtc": sellHitBtcNum,
                    "indodax": buyIndodaxNum
                });*/
                let isOpportunityOut = false;
                $('.head-' + id).removeClass('opportunity-out');
                if (sellIndodaxNum < buyBittrexNum || sellIndodaxNum < buyHitBtcNum) {
                    isOpportunityOut = true;
                    $('.head-' + id).addClass('opportunity-out');
                    //console.log("out : " + id + ' - ');
                    //console.log($('.head-' + id));
                }
            }


            // Opportunity In
            if (!isNaN(buyIndodaxNum) && buyIndodaxNum > 0 && (!isNaN(sellBittrexNum) && sellBittrexNum > 0 || !isNaN(sellHitBtcNum) && sellHitBtcNum > 0)) {
                let isOpportunityIn = false;
                $('.head-' + id).removeClass('opportunity-in');
                /**/
                if (buyIndodaxNum > sellBittrexNum || buyIndodaxNum > sellHitBtcNum) {
                    isOpportunityIn = true;
                    $('.head-' + id).addClass('opportunity-in');
                    //console.log($('.head-' + id));
                }
            }
        }

        /*window.setInterval(function () {
            /// call your function here
        }, 5000);*/

        function decicionSuggest() {
            $('.opportunity-out').each(function (k, v) {
                var id = $(v).data('id');

            });
        }

        function switchOnOff(id, isOn, text){
            $('#' + id).text(text);
            if(isOn){
                $('#' + id).removeClass('badge-danger');
                $('#' + id).addClass('badge-success');
            }else{
                $('#' + id).removeClass('badge-success');
                $('#' + id).addClass('badge-danger');
            }
        }

        function getBuySell(id){
            let sellElIndodax = $('#indodax-sell-' + id);
            let sellElBittrex = $('#bittrex-sell-' + id);
            let sellElHitBtc = $('#hitbtc-sell-' + id);

            let buyElIndodax = $('#indodax-buy-' + id);
            let buyElBittrex = $('#bittrex-buy-' + id);
            let buyElHitBtc = $('#hitbtc-buy-' + id);


            let buyIndodaxNum = 0;
            let buyBittrexNum = 0;
            let buyHitBtcNum = 0;
            if (buyElIndodax.data('market') == 'indodax' && buyElIndodax.data('type') == 'buy') {
                buyIndodaxNum = parseFloat(buyElIndodax.data('num'));
            }
            if (buyElBittrex.data('market') == 'bittrex' && buyElBittrex.data('type') == 'buy') {
                buyBittrexNum = parseFloat(buyElBittrex.data('num')) * parseFloat($('base').data('usdt'));
            }
            if (buyElHitBtc.data('market') == 'hitbtc' && buyElHitBtc.data('type') == 'buy') {
                buyHitBtcNum = parseFloat(buyElHitBtc.data('num')) * parseFloat($('base').data('usdt'));
            }

            let sellIndodaxNum = 0;
            let sellBittrexNum = 0;
            let sellHitBtcNum = 0;
            if (sellElIndodax.data('market') == 'indodax' && sellElIndodax.data('type') == 'sell') {
                sellIndodaxNum = parseFloat(sellElIndodax.data('num'));
            }
            if (sellElBittrex.data('market') == 'bittrex' && sellElBittrex.data('type') == 'sell') {
                sellBittrexNum = parseFloat(sellElBittrex.data('num')) * parseFloat($('base').data('usdt'));
            }
            if (sellElHitBtc.data('market') == 'hitbtc' && sellElHitBtc.data('type') == 'sell') {
                sellHitBtcNum = parseFloat(sellElHitBtc.data('num')) * parseFloat($('base').data('usdt'));
            }

            return {
                'buyIndodaxNum': buyIndodaxNum,
                'buyBittrexNum':buyBittrexNum,
                'buyHitBtcNum':buyHitBtcNum,
                'sellIndodaxNum':sellIndodaxNum,
                'sellBittrexNum':sellBittrexNum,
                'sellHitBtcNum':sellHitBtcNum
            }

        }
    });
</script>
</body>
</html>
